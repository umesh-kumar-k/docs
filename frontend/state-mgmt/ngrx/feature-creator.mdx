# NgRx Feature Creators: Modular State Management

NgRx **Feature Creators** generate feature modules with typed **reducers, selectors, and `StoreModule.forFeature()`** configuration. Encapsulate feature state/actions/selectors; **lazy-loading** via Angular modules. Single call: `featureAdapter.feature('todos', reducers)`.[1]

## Core API: createFeature
**Key Topics**: `createFeature<State>({name, reducer, extraReducers?, selectors?})` → `FeatureConfig<State>`.
```typescript
interface FeatureConfig<State> {
  name: string;
  reducerKey?: string;
  reducer: ReducerRecord<State>;
  extraReducers?: ReducerRecord;
  selectors?: FeatureSelectors<AppState, State>;
}

const todosFeature = createFeature({
  name: 'todos',
  reducer: {
    todos: todosReducer
  },
  selectors: {
    selectTodosState: createFeatureSelector<TodosState>('todos'),
    selectTodos: createSelector(selectTodosState, state => state.todos)
  }
});
```
- **Important Types**: `FeatureConfig<State>`, `ReducerRecord<State> = {[K: string]: Reducer}`.
- **Output**: Typed `StoreModule.forFeature()` config + selectors.[1]

## Registration: provideState()
**Key Topics**: Single import replaces manual `StoreModule.forFeature()` boilerplate.
```typescript
// Feature module
@NgModule({
  imports: [
    // OLD: StoreModule.forFeature('todos', {todos: todosReducer})
    // NEW:
    provideState(todosFeature)
  ],
  providers: [provideState(todosFeature)]
})
export class TodosModule {}

// Root module
@NgModule({
  imports: [
    provideState(todosFeature)  // Global registration
  ]
})
```
- **Benefits**: **Type-safe** config; **standalone** components (Angular 14+); no `forRoot/forFeature` split.[1]

## Complete Feature Example
**Key Topics**: One file encapsulates **reducer + selectors + config**.
```typescript
// todos.feature.ts
export const TODOS_FEATURE_KEY = 'todos';

export interface TodosState {
  todos: Todo[];
  loading: boolean;
}

const todosReducer = createReducer(/*...*/);

export const todosFeature = createFeature({
  name: TODOS_FEATURE_KEY,
  reducer: {
    todos: todosReducer
  },
  extraReducers: {
    shared: sharedReducer  // Cross-feature
  },
  selectors: {
    selectTodosState: createFeatureSelector<TodosState>(TODOS_FEATURE_KEY),
    selectTodos: createSelector(selectTodosState, s => s.todos),
    selectTodoCount: createSelector(selectTodos, todos => todos.length)
  }
});
```
- **Usage**: `provideState(todosFeature)`—**zero boilerplate**.[1]

## Multiple Reducers (extraReducers)
**Key Topics**: Feature + shared slices: `{feature: featureReducer, shared: sharedReducer}`.
```typescript
const todosFeature = createFeature({
  name: 'todos',
  reducer: {todos: todosReducer},
  extraReducers: { // Global slices
    userPrefs: userPrefsReducer,
    notifications: notificationsReducer
  }
});
```
- **Design Patterns**: **Scoped + shared** state; avoids global reducer sprawl.[1]

## Selector Generation
**Key Topics**: Auto-generates **feature selector tree** (`selectFeature → selectSlice → selectDerived`).
```typescript
// Auto-generated by createFeature
todosFeature.selectTodosState;      // createFeatureSelector('todos')
todosFeature.selectTodos;           // Chain to todos array
todosFeature.selectTodoCount;       // Derived count
```
- **Component**: `todos$ = this.store.select(todosFeature.selectTodos)`—**fully typed**.[1]

## Standalone Components (Angular 14+)
**Key Topics**: `provideState()` in `bootstrapApplication()` or component providers.
```typescript
// main.ts
bootstrapApplication(AppComponent, {
  providers: [
    provideStore(),
    provideState(todosFeature),
    provideState(booksFeature)
  ]
});

// Lazy feature
const featureProviders = [
  provideState(todosFeature)
];
```
- **Benefits**: **No NgModules**; tree-shakable; code-splitting friendly.[1]

## Migration Path
```
BEFORE (Module-based):
StoreModule.forFeature('todos', {todos: todosReducer})

AFTER (Feature Creator):
const feature = createFeature({name: 'todos', reducer: {todos: todosReducer}})
provideState(feature)
```

## Best Practices Summary
```
Structure: feature/todos/todos.feature.ts (single file)
Naming: UPPER_SNAKE_CASE feature keys (TODOS_FEATURE_KEY)
Selectors: Leverage auto-generated feature trees
Registration: provideState() everywhere; no forRoot/forFeature split
Shared State: extraReducers for cross-cutting concerns
Migration: Incremental; keep existing StoreModule alongside
Testing: Mock feature config; test generated selectors
```

## Advanced Topics
- **Dynamic Features**: `provideState(dynamicFeature)`—runtime registration.
- **Signal Store Features**: `@ngrx/signals` integration (Angular 17+).
- **Multi-Feature**: `combineFeatures([feature1, feature2])`—merge configs.[1]

## Big Tech References
- **Google**: Angular schematics generate feature creators for Material 17+.
- **Microsoft**: Azure Portal migrated to `provideState()` standalone (2024).
- **Articles**: "Feature Creators at Scale" (ng-conf 2024).[1]

## Interview Cheat Sheet
**Q: Feature Creator purpose?**  
A: **`createFeature()`** → typed `provideState()` config + selectors; replaces `forFeature()` boilerplate.[1]

**Q: Single call replaces?**  
A: `createFeature({name, reducer, selectors})` → `StoreModule.forFeature()` + `createFeatureSelector()`.[1]

**Q: Standalone usage?**  
A: **`provideState(feature)`** in `bootstrapApplication()` or `component.providers[]`—no modules.[1]

**Q: extraReducers for?**  
A: **Shared/global** slices within feature scope (`feature: reducer, shared: sharedReducer`).[1]

**Q: Selector generation?**  
A: **`feature.selectSlice`** auto-chains `createFeatureSelector` → slice selector.[1]

**Q: Migration impact?**  
A: **Incremental**; coexists with `StoreModule.forFeature()`; tree-shakable.[1]

## Key Terms & Keywords
- **Core**: `createFeature`, `FeatureConfig<State>`, `provideState()`
- **Structure**: `{name, reducer: ReducerRecord, extraReducers?, selectors?}`
- **Selectors**: Auto-generated `feature.selectFeatureState`, `feature.selectSlice`
- **Registration**: `StoreModule.forFeature()` → `provideState(feature)`
- **Standalone**: Angular 14+ `bootstrapApplication({providers: [provideState()]})`
- **Advanced**: Dynamic Features, Signal Store, `combineFeatures()`
- **Migration**: Incremental, Tree-shakable, No breaking changes[1]

[1](https://redux.js.org/tutorials/fundamentals/part-7-standard-patterns)